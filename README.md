# Smart Rain Barrel

The best way for me to participate in Justine’s hobbies is to over-engineer them and her garden is no different. To reduce our water use I came up with a smart water barrel that:

* Can turn the pump for the barrel water on and off
* Has four float switches to detect the barrel water level
* Uses two valves to select barrel water or city water
* Monitors two soil moisture sensors to determine if watering is needed
* Connects to my Home Assistant automation server for control and logging
* Uses the weather forecast to postpone watering if rain is imminent

## Hardware 

The components are all installed in a waterproof project box. I 3D printed brackets to hold the miscellaneous circuit boards. I used various waterproof cable glands and cheap waterproof connectors to connect the pumps, valves, and sensors to the box. The wiring is messy in this photo because I didn’t want to lock it down until all the programming is done. Here is [a wiring diagram](blob:https://mechied.com/37d0a3ae-e11d-42e2-9f07-c8ca1182d6ed) 
![Float Sensor Array](https://mechied.com/wp-content/uploads/2022/05/sensor-array-768x1024.jpg|width=300px)
![Control Box](https://mechied.com/wp-content/uploads/2022/05/rain-barrel-control-768x1024.jpg|width=300px)
